# yaml-language-server: $schema=../schemas/logflow-workflow-schema.json
# 基础错误检测工作流配置
workflow:
  id: "basic_error_detection_yaml"
  name: "基础错误检测（YAML配置）"
  description: "使用YAML配置的基础日志错误检测工作流"
  version: "1.0.0"
  author: "LogFlow System"
  metadata:
    category: "日志分析"
    tags: ["错误检测", "日志诊断"]

# 全局配置
globalConfig:
  timeout: 30000
  retryCount: 3
  logLevel: "INFO"

# 节点定义
nodes:
  - id: "data_source"
    name: "日志数据源"
    type: "plugin"
    position:
      x: 100
      y: 100
    config:
      pluginType: "mock"
      mockType: "ARRAY"
      recordCount: 100
      dataFormat: "JSON"
      outputKey: "log_data"
  
  - id: "error_detection"
    name: "错误检测分析"
    type: "diagnosis"
    position:
      x: 300
      y: 100
    config:
      diagnosisType: "error_detection"
      inputs:
        - key: "log_data"
          alias: "logData"
          required: true
          dataType: "array"
          description: "日志数据"
      outputKey: "error_results"
      errorPatterns: ["ERROR", "FATAL", "Exception", "Failed"]
  
  - id: "console_output"
    name: "控制台输出"
    type: "notification"
    position:
      x: 500
      y: 100
    config:
      providerType: "console"
      inputs:
        - key: "error_results"
          alias: "errorResults"
          required: true
          dataType: "object"
          description: "错误检测结果"
      title: "错误检测分析报告"
      messageType: "TEXT"
      priority: "HIGH"
      provider:
        format: "detailed"
        timestamp: true

# 连接关系
connections:
  - from: "data_source"
    to: "error_detection"
    enabled: true
  
  - from: "error_detection"
    to: "console_output"
    enabled: true
